
{% for matchup in matchups %}
<div class="border d-flex align-items-center my-3 message-header list-group-item list-group-item-action list-group-item-primary" 
hx-trigger='click' 
hx-get="{% url 'matchup' matchup.id %}" 
hx-push-url="/matchup/{{ matchup.id }}/" 
hx-vals='{"load_type": "load-matchup"}' 
hx-swap="innerHTML" 
hx-target="#matchup-chat">
{% if matchup.player_accepting.user == request.user %}

    <div class="w-25 me-2">
        <img src="{{ matchup.player_inviting.profile_image.url}}" class="img-fluid" style="border-radius: 50%;">
    </div>

    <div class="w-75" >
        <div class="h6">
            {{ matchup.player_inviting.user.first_name}} {{ matchup.player_inviting.user.last_name}}
            
    
            
        </div>
    {% else %}

    <div class="w-25 me-2">
        <img src="{{ matchup.player_accepting.profile_image.url}}" class="img-fluid" style="border-radius: 50%;">
    </div>

    <div class="w-75" >
        <div class="h6">
            {{ matchup.player_accepting.user.first_name}} {{ matchup.player_accepting.user.last_name}}
            
            
            
            </div>

    {% endif %}

        {% if matchup.messages.last.sender.user == request.user %}

        <div class="d-flex">

            <div class="mt-4">
                You: {{ matchup.messages.last.body }}
            </div>
        </div>
        {% else %}
        <div class="d-flex">

            <div class="mt-4">
                {{ matchup.messages.last.sender.user.username }}: {{ matchup.messages.last.body }}
            </div>
        </div>
        {% endif %}


        
    </div>
</div>

<script>
var messageHeaders = document.querySelectorAll('.message-header');
messageHeaders[0].classList.add('active');

messageHeaders.forEach(function(messageHeader) {

  messageHeader.addEventListener('click', function() {

    messageHeaders.forEach(function(messageHeader) {
        
      messageHeader.classList.remove('active');
    });
    this.classList.add('active');
  });
});
</script>
{% endfor %}