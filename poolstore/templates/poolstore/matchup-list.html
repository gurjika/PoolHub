{% extends 'poolstore/base.html' %}

{% block content %}
    <div class="row justify-content-center">    
        <div class="col-lg-6">
            <div class="list-group">
                {% for matchup in matchups %}
                <a class="
                border d-flex 
                align-items-center
                my-3 message-header 
                list-group-item list-group-item-action 
                list-group-item-secondary" href='{% url "matchup" matchup.id %}'>

                {% if matchup.player_accepting.user == request.user %}
                
                    <div class="w-25 me-2">
                        <img src="{{ matchup.player_inviting.profile_image.url}}" class="img-fluid" style="border-radius: 50%;">
                    </div>
                
                    <div class="w-75" >
                        <div class="h6">
                            {{ matchup.player_inviting.user.first_name}} {{ matchup.player_inviting.user.last_name}}
                            
                    
                            
                        </div>
                    {% else %}
                
                    <div class="w-25 me-2">
                        <img src="{{ matchup.player_accepting.profile_image.url}}" class="img-fluid" style="border-radius: 50%;">
                    </div>
                
                    <div class="w-75" >
                        <div class="h6">
                            {{ matchup.player_accepting.user.first_name}} {{ matchup.player_accepting.user.last_name}}
                            
                            
                            
                            </div>
                
                    {% endif %}
                
                        {% if matchup.messages.last.sender.user == request.user %}
                
                        <div class="d-flex">
                
                            <div class="mt-4">
                                You: {{ matchup.messages.last.body }}
                            </div>
                        </div>
                        {% else %}
                        <div class="d-flex">
                
                            <div class="mt-4">
                                {{ matchup.messages.last.sender.user.username }}: {{ matchup.messages.last.body }}
                            </div>
                        </div>
                        {% endif %}
                
                
                        
                    </div>
                </div>
                {% endfor %}
            </a>
        </div>
    </div>
{% endblock %}
